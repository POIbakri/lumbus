# =============================================================================
# LUMBUS eSIM MARKETPLACE - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env.local and fill in your actual values
# NEVER commit .env.local to version control

# =============================================================================
# APPLICATION
# =============================================================================
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME=Lumbus

# =============================================================================
# SUPABASE
# =============================================================================
# Get these from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# Service role key (has full database access - bypasses RLS)
# CRITICAL: Never expose this in client-side code
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Optional: Direct database connection URL (for migrations)
DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres

# =============================================================================
# ESIM ACCESS API
# =============================================================================
# Get credentials from: https://docs.esimaccess.com/
# Contact eSIM Access support for API credentials and webhook configuration

# API endpoint (production - v1/open)
ESIMACCESS_API_URL=https://api.esimaccess.com/api/v1/open

# API Access Code (RT-AccessCode header)
# Get this from your eSIM Access dashboard
ESIMACCESS_ACCESS_CODE=your-access-code-here

# Webhook secret (optional but recommended)
# Generate a random string: openssl rand -hex 32
ESIMACCESS_WEBHOOK_SECRET=your-webhook-secret-here

# =============================================================================
# STRIPE
# =============================================================================
# Get keys from: https://dashboard.stripe.com/apikeys
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your-publishable-key
STRIPE_SECRET_KEY=sk_test_your-secret-key

# Webhook signing secret
# Get from: https://dashboard.stripe.com/webhooks
# Create endpoint: https://yourdomain.com/api/stripe/webhook
# Events to listen for: checkout.session.completed, charge.refunded
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-signing-secret

# =============================================================================
# RESEND (Email Service)
# =============================================================================
# Get API key from: https://resend.com/api-keys
RESEND_API_KEY=your-resend-api-key-here

# Email addresses
RESEND_FROM_EMAIL=orders@yourdomain.com
RESEND_FROM_NAME=Lumbus eSIM

# =============================================================================
# ADMIN AUTHENTICATION
# =============================================================================
# Simple token-based admin auth (used in Authorization: Bearer header)
# Generate a secure token: openssl rand -hex 32
ADMIN_TOKEN=your-secure-admin-token-here

# =============================================================================
# OPTIONAL - REFERRAL SYSTEM
# =============================================================================
# Referral discount configuration
REFERRAL_DISCOUNT_PERCENT=10

# =============================================================================
# OPTIONAL - FRAUD DETECTION
# =============================================================================
# Enable/disable fraud detection features
ENABLE_FRAUD_DETECTION=true

# =============================================================================
# OPTIONAL - ANALYTICS
# =============================================================================
# Google Analytics
# NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================
# Uncomment for local development debugging
# DEBUG=true
# LOG_LEVEL=debug

# =============================================================================
# QUICK START CHECKLIST
# =============================================================================
# [ ] 1. Copy this file to .env.local
# [ ] 2. Set NEXT_PUBLIC_APP_URL to your domain
# [ ] 3. Configure Supabase credentials (3 required + 1 optional)
# [ ] 4. Configure eSIM Access API credentials (2 required: API_URL + ACCESS_CODE)
# [ ] 5. Configure Stripe credentials (3 required)
# [ ] 6. Configure Resend email credentials (3 required)
# [ ] 7. Generate and set ADMIN_TOKEN
# [ ] 8. Run database migrations: npm run db:migrate
# [ ] 9. Sync eSIM Access packages: Visit /admin and click "Sync Packages"
# [ ] 10. Configure webhooks in Stripe and eSIM Access dashboards
# [ ] 11. Test complete purchase flow
# [ ] 12. Deploy to production

# =============================================================================
# WEBHOOK URLS (Configure in provider dashboards)
# =============================================================================
# Stripe webhook URL:
#   https://yourdomain.com/api/stripe/webhook
#   Events: checkout.session.completed, charge.refunded
#
# eSIM Access webhook URL:
#   https://yourdomain.com/api/esimaccess/webhook
#   Events: ORDER_STATUS, SMDP_EVENT, ESIM_STATUS, DATA_USAGE, VALIDITY_USAGE
#
# Remember to update webhook URLs when deploying to production!
